(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))c(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&c(u)}).observe(document,{childList:!0,subtree:!0});function a(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function c(o){if(o.ep)return;o.ep=!0;const l=a(o);fetch(o.href,l)}})();const n=document.querySelector("canvas"),e=n.getContext("2d");let t,h=800,d,i,f,w=0,p=!1,m=0;const P=()=>{const r=e.createRadialGradient(n.width/2,n.height/2,0,n.width/2,n.height/2,n.width);r.addColorStop(0,"#333"),r.addColorStop(1,"#000"),e.fillStyle=r,e.fillRect(0,0,n.width,n.height)},S=()=>{for(let r=0;r<i.length;r++){const[s,a]=i[r];if(e.fillStyle=r===0?"#A8FF60":"#4CAF50",e.beginPath(),e.roundRect(s*t+1,a*t+1,t-2,t-2,6),e.shadowColor="rgba(0, 255, 0, 0.4)",e.shadowBlur=10,e.shadowOffsetX=0,e.shadowOffsetY=0,e.fill(),r===0){e.fillStyle="white";const c=2;e.beginPath(),e.arc(s*t+t/3,a*t+t/3,c,0,Math.PI*2),e.fill(),e.beginPath(),e.arc(s*t+t*2/3,a*t+t/3,c,0,Math.PI*2),e.fill(),e.shadowColor="transparent"}}},x=()=>{const[r,s]=f,a=Math.sin(m)*2;e.beginPath(),e.fillStyle="red",e.shadowColor="rgba(255, 0, 0, 0.6)",e.shadowBlur=10,e.shadowOffsetX=0,e.shadowOffsetY=0,e.arc(r*t+t/2,s*t+t/2,(t-6)/2+a,0,Math.PI*2),e.shadowColor="rgba(0, 0, 0, 0.4)",e.shadowBlur=4,e.shadowOffsetX=2,e.shadowOffsetY=2,e.fill(),e.shadowColor="transparent",e.fillStyle="green",e.beginPath(),e.arc(r*t+t/2,s*t+t/2-6,3,0,Math.PI*3),e.fill(),m+=.1};window.addEventListener("resize",()=>{M()});window.addEventListener("click",()=>{p||(p=!0,requestAnimationFrame(y))});window.addEventListener("keydown",r=>{switch(r.key){case"ArrowRight":{d!=="o"&&(d="e");break}case"ArrowLeft":{d!=="e"&&(d="o");break}case"ArrowUp":{d!=="s"&&(d="n");break}case"ArrowDown":{d!=="n"&&(d="s");break}}});const A=()=>{if(i[0][0]>n.width/t-1||i[0][0]<0||i[0][1]>n.height/t-1||i[0][1]<0)return!0;{const[r,...s]=i;for(let a of s)if(a[0]===r[0]&&a[1]===r[1])return!0}return!1},g=()=>{const[r,s]=[Math.trunc(Math.random()*(n.width/t)),Math.trunc(Math.random()*(n.height/t))];for(let a of i)if(a[0]===r&&a[1]===s)return g();f=[r,s]},O=()=>{const r=n.width/t-5,s=3,a=n.height/t-5,c=5,o=[Math.floor(Math.random()*(r-s))+s,Math.floor(Math.random()*(a-c))+c];i.push(o,[o[0]-1,o[1]],[o[0]-2,o[1]]),d=["e","n","s"][Math.trunc(Math.random()*3)]},k=()=>{let r;switch(d){case"e":{r=[i[0][0]+1,i[0][1]];break}case"o":{r=[i[0][0]-1,i[0][1]];break}case"n":{r=[i[0][0],i[0][1]-1];break}case"s":{r=[i[0][0],i[0][1]+1];break}}return i.unshift(r),r[0]===f[0]&&r[1]===f[1]?(w++,h<=920&&(h+=5),g()):i.pop(),A()},v=()=>{e.fillStyle="white",e.font="40px sans-serif",e.textBaseline="top",e.fillText(w,t,t)},y=()=>{k()?(alert(`Perdu, votre score est ${w}`),p=!1,b()):(P(),S(),x(),v(),setTimeout(()=>{requestAnimationFrame(y)},1e3-h))},b=()=>{w=0,h=800,i=[],e.clearRect(0,0,n.width,n.height),e.font="40px sans-serif",e.fillStyle="black",e.textBaseline="middle",e.textAlign="center",e.fillText("Cliquez sur l'écran pour démarrer la partie",n.width/2,n.height/2),g(),O()},M=()=>{window.innerWidth<576?t=20:window.innerWidth<768?t=25:window.innerWidth<992?t=30:window.innerWidth<992?t=35:window.innerWidth<1200?t=40:window.innerWidth>=1200&&(t=45),n.width=Math.floor((window.innerWidth-2)/t)*t,n.height=Math.floor((window.innerHeight-2)/t)*t,b()};M();
